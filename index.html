<html>

  <style type="text/css" media="screen">
    body {
        margin: 0px;
    }
    #wrapper {
        background-color: rgb(22,23,25);
        width: 100%;
        height: 100%;
        display: flex;
        margin: 0px;
    }

    #wrapper > div {
        background-color: rgb(22,23,25);
        border-color: white;
        padding: 20px;
        margin: 20px;
        border-style: solid;
    }
    
    #desktop-area {
        width: 80%;
        height: 100% - 40px;
        float: left;
        border-color: white;
        padding: 20px;
    }

    #menu_area {
        width: 20%;
        height: 100% - 40px;
        float: left;
        border-color: white;
        padding: 20px;
    }

    #screensaver-canvas {
        width: 200px;
        height: 200px;
    }
    
    .dragable_windows {
        width: 300px;
        height: 400px;
        background-color: red;
        position: absolute;
    }
  </style>


  <body>
    <div id="wrapper">
      <div id="desktop-area">
        <div id="drag-example" class="dragable_windows">
          <canvas id="screensaver-canvas"><\canvas>
        </div>

      </div>

      <div id="menu_area">

      </div>
    </div>

    <script src="js/third-party/gl-matrix-min.js"></script>
   <script type="module">

     // Window Dragging
     var element = document.getElementById("drag-example");

     const DragStates = {
         DRAGGING: 0,
         NO_DRAGGING: 1
     };
      
     function clickDragableElement(element) {
         if (element.drag_state == DragStates.DRAGGING) {
             return;
         }

         element.drag_state = DragStates.DRAGGING;

         document.onmousemove = dragDragableElement;

         element.srcElement.start_pos_x = element.clientX;
         element.srcElement.start_pos_y = element.clientY;
     }

     function dragDragableElement(element) {
         var el = element.srcElement;
         const new_x = el.start_pos_x - element.clientX;
         const new_y = el.start_pos_y - element.clientY;
         el.start_pos_x = element.clientX;
         el.start_pos_y = element.clientY;
         el.style.left = (el.offsetLeft - new_x) + "px";
         el.style.top = (el.offsetTop - new_y) + "px";
     }

     function releaseDragableElement(element) {
         if (element.drag_state == DragStates.NO_DRAGGING) {
             return;
         }
         element.drag_state = DragStates.NO_DRAGGING;

         document.onmousemove = null;
     }

     function makeDragable(element) {
         element.drag_state = DragStates.NO_DRAGGING;
         element.onmousedown = clickDragableElement;
         element.onmouseup = releaseDragableElement;
     }

     makeDragable(element); 

     import { init_webgl_screensaver } from "./js/screensaver.js"
     init_webgl_screensaver();
   </script>
  </body>
</html>
